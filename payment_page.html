<!DOCTYPE html>
<html>

<head>
    <title>
        Dashboard
    </title>
    <style>
        .clinic-profile-div {
            background-color: grey;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 0px 5px grey;
            display: inline-block;
            position: fixed;
            top: 5px;
            left: 5px;
        }

        .main-dashboard-div {
            display: grid;
            grid-template-columns: 1fr 1fr;
            width: 500px;
            column-gap: 5px;
            row-gap: 5px;
            background-color: gray;
            padding: 20px;
            border-radius: 20px;
            margin: 10px auto;
        }

        .sq1,
        .sq2,
        .sq3,
        .sq4 {
            background-color: whitesmoke;
            padding: 10px;
            border-radius: 7px;
            cursor: pointer;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.4);
            backdrop-filter: blur(4px);
            display: none;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-box {
            background: white;
            padding: 20px;
            width: 300px;
            border-radius: 6px;
            text-align: center;
        }

        .modal-actions {
            margin-top: 20px;
            display: flex;
            justify-content: space-between;
        }

        #loader {
            width: 50px;
            height: 50px;
            /* Using a conic gradient for a smooth "tail" effect */
            background: radial-gradient(farthest-side, #38bdf8 94%, #0000) top/4px 4px no-repeat,
                conic-gradient(#0000 30%, #38bdf8);
            -webkit-mask: radial-gradient(farthest-side, #0000 calc(100% - 4px), #000 0);
            border-radius: 50%;

            /* The "Premium" Glow */
            filter: drop-shadow(0 0 8px rgba(56, 189, 248, 0.6));

            /* Animation with a slight "ease" rather than robotic linear */
            animation: spin 1s cubic-bezier(0.4, 0, 0.2, 1) infinite;

            position: fixed;
            inset: 0;
            margin: auto;
            z-index: 9999;
        }

        /* Optional: Adding a soft outer ring for depth */
        #loader::after {
            content: "";
            position: absolute;
            inset: -6px;
            border-radius: 50%;
            border: 2px solid #334155;
            opacity: 0.2;
        }

        @keyframes spin {
            100% {
                transform: rotate(360deg);
            }
        }
    </style>
</head>

<body>
    <div id="loader"></div>

    <div id="app" style="display:none;">
        <p class="heading">Payment Gateway</p>
        <p class="id-p">Redirectingâ€¦</p>
    </div>

    <script>
        //DOM Objects:- 
        let userIdP = document.querySelector(".id-p");
        const API_BASE_URL = "https://bookback-t83d.onrender.com";
        document.addEventListener("DOMContentLoaded",
            async () => {
                loader.style.display = "block";
                app.style.display = "none";



                let response = await fetch(`${API_BASE_URL}/refresh`, {
                    method: "POST",
                    credentials: "include"
                });


                if (response.status === 400 || !response.ok) {
                    alert("Oops ! Something went wrong !");
                    window.location.href = "/index.html";
                    return;
                };

                let data = await response.json();
                if (data.status === true) {
                    window.location.href = "/dashboard.html";
                    return;
                };

                let response2 = await fetch(`${API_BASE_URL}/user-id`, {
                    method: "POST",
                    credentials: "include"
                });

                if (response.status === 400 || !response.ok) {
                    alert("Oops ! Looks like you are not logged in !");
                    window.location.href = "/index.html"
                    return;

                }

                let data2 = await response2.json();

                window.location.href = `https://nemesisbuilds.gumroad.com/l/evpyg?user_id=${data2.id}`;










            });









    </script>
</body>

</html>